"use strict";var e=require("react"),t=require("react-router"),r=require("./enableVisualEditing.cjs");exports.default=function(u){const{components:s,refresh:a,zIndex:n}=u,c=t.useNavigate(),i=e.useRef(c),[o,l]=e.useState(),p=t.useRevalidator(),[f,h]=e.useState(null),[d,v]=e.useState(!1);e.useEffect((()=>{i.current=c}),[c]),e.useEffect((()=>{f&&"loading"===p.state?v(!0):f&&d&&"idle"===p.state&&(f(),h(null),v(!1))}),[d,p.state,f]),e.useEffect((()=>{const e=r.e({components:s,zIndex:n,refresh:e=>{function t(){return("mutation"!==e.source||!e.livePreviewEnabled)&&new Promise((e=>{p.revalidate(),h((()=>e))}))}return a?a(e,t):t()},history:{subscribe:e=>(l((()=>e)),()=>l(void 0)),update:e=>{"push"===e.type||"replace"===e.type?i.current(e.url,{replace:"replace"===e.type}):"pop"===e.type&&i.current(-1)}}});return()=>e()}),[s,a,p,n]);const m=t.useLocation();return e.useEffect((()=>{o&&o({type:"push",url:`${m.pathname}${m.search}${m.hash}`})}),[m.hash,m.pathname,m.search,o]),null};//# sourceMappingURL=VisualEditingComponent2.cjs.map
