"use strict";var e=require("@remix-run/react"),t=require("react"),r=require("./enableVisualEditing.cjs");exports.default=function(u){const{components:s,refresh:a,zIndex:n}=u,c=e.useNavigate(),i=t.useRef(c),[l,o]=t.useState(),p=e.useRevalidator(),[f,h]=t.useState(null),[d,m]=t.useState(!1);t.useEffect((()=>{i.current=c}),[c]),t.useEffect((()=>{f&&"loading"===p.state?m(!0):f&&d&&"idle"===p.state&&(f(),h(null),m(!1))}),[d,p.state,f]),t.useEffect((()=>{const e=r.e({components:s,zIndex:n,refresh:e=>{function t(){return("mutation"!==e.source||!e.livePreviewEnabled)&&new Promise((e=>{p.revalidate(),h((()=>e))}))}return a?a(e,t):t()},history:{subscribe:e=>(o((()=>e)),()=>o(void 0)),update:e=>{"push"===e.type||"replace"===e.type?i.current(e.url,{replace:"replace"===e.type}):"pop"===e.type&&i.current(-1)}}});return()=>e()}),[s,a,p,n]);const v=e.useLocation();return t.useEffect((()=>{l&&l({type:"push",url:`${v.pathname}${v.search}${v.hash}`})}),[v.hash,v.pathname,v.search,l]),null};//# sourceMappingURL=VisualEditingComponent3.cjs.map
