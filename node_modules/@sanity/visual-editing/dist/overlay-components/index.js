import{F as t,u as e,A as o,I as n,d as i,B as a}from"../_chunks-es/PointerEvents.js";import{P as r}from"../_chunks-es/PointerEvents.js";import{jsxs as s,jsx as l}from"react/jsx-runtime";import{useCallback as d,useState as h,useRef as p}from"react";import{u,a as c}from"../_chunks-es/mutations.js";const m=i(a)`
  position: relative;
  transform: var(--add-button-position);

  --add-button-position: translateY(0);
  [data-position='top'] & {
    --add-button-position: translateY(-50%);
  }
  [data-position='right'] & {
    --add-button-position: translateX(50%);
  }
  [data-position='bottom'] & {
    --add-button-position: translateY(50%);
  }
  [data-position='left'] & {
    --add-button-position: translateX(-50%);
  }
`,f=i(t)`
  pointer-events: all;
  height: var(--hover-area-height);
  width: var(--hover-area-width);

  --hover-area-height: 100%;
  --hover-area-width: 100%;
  &[data-position='top'],
  &[data-position='bottom'] {
    --hover-area-height: 48px;
  }
  &[data-position='right'],
  &[data-position='left'] {
    --hover-area-width: 48px;
  }
`,v=t=>{const{element:i,hoverAreaExtent:a,node:r,onAddUnion:u,position:c}=t,[v,b]=h(!1),g=d((()=>{b(!0)}),[]),x=d((()=>{b(!1)}),[]),E=p(null),w=e(),A=d((t=>{if(t.target===E.current){const e=new MouseEvent(t.type,{...t.nativeEvent,bubbles:!0,cancelable:!0});i.dispatchEvent(e)}}),[i]),[M,j]=h(null),[y,k]=h(!1),I=d((()=>{k(!1),b(!1)}),[]),U=d((t=>{k(!1),u("top"===c||"left"===c?"before":"after",t.name),w("Visual Editing Insert Menu Item Inserted",null)}),[u,c,w]);/* @__PURE__ */
return s(f,{align:"top"===c?"flex-start":"bottom"===c?"flex-end":"center","data-position":c,"data-sanity-overlay-element":!0,justify:"left"===c?"flex-start":"right"===c?"flex-end":"center",onClick:A,onContextMenu:A,onMouseDown:A,onMouseEnter:g,onMouseLeave:x,onMouseUp:A,ref:E,style:{["top"===c||"bottom"===c?"height":"width"]:a},children:[(v||y)&&/* @__PURE__ */l(m,{ref:j,icon:o,mode:"ghost",onClick:()=>k((t=>!t)),radius:"full",selected:y}),y&&M&&/* @__PURE__ */l(n,{node:r,onDismiss:I,referenceElement:M,onSelect:U})]})},b=e=>{const{direction:o="vertical",element:n,hoverAreaExtent:i,node:a,parent:r}=e,{getDocument:h}=u(),p=d(((t,e)=>{const o=h(a.id),n=c(a,e,t);o.patch(n)}),[h,a]);return r?/* @__PURE__ */s(t,{height:"fill",width:"fill",direction:"horizontal"===o?"row":"column",justify:"space-between",children:[
/* @__PURE__ */l(v,{element:n,hoverAreaExtent:i,node:r,onAddUnion:p,position:"horizontal"===o?"left":"top"}),
/* @__PURE__ */l(v,{element:n,hoverAreaExtent:i,node:r,onAddUnion:p,position:"horizontal"===o?"right":"bottom"})]}):null};function g(t,e){return{component:t,props:e}}function x(t){return t}export{r as PointerEvents,b as UnionInsertMenuOverlay,g as defineOverlayComponent,x as defineOverlayComponents};//# sourceMappingURL=index.js.map
